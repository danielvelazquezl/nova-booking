<div>
  <%= puts filterrific.inspect %>
  <%= form_for_filterrific(filterrific, url: bookings_search_path) do |f| %>
    <div class="form-row">
      <div class="form-group col-md">
        <%= f.text_field :search_query, class: "form-control", placeholder: "Nombre", value: f.object.search_query %>
      </div>
      <div class="form-group col-md">
        <%= f.select :bookings_by_state, options_for_select([["Seleccionar estado...", ""], ["Vigente", 0],["Terminada", 1]], selected: f.object.bookings_by_state), {}, class: "form-control" %>
      </div>
      <div class="form-group col-md">
        <%= f.select :sorted_by, filterrific.select_options[:sorted_by],{}, class: "form-control" %>
      </div>
    <div class="form-group col-md">
      <%= text_field_tag :date_from, if f.object.bookings_by_owner_between_dates.nil?
                                       ''
                                     else
                                       f.object.bookings_by_owner_between_dates[:date_from].blank? ? '' : I18n.l(f.object.bookings_by_owner_between_dates[:date_from], format: '%d %B %Y')
                                     end, class: "form-control datepicker", placeholder: "Fecha de entrada", style:"background-color: white", readonly:"true", id:"date_from" %>
    </div>
    <div class="form-group col-md">
      <%= text_field_tag :date_to, if f.object.bookings_by_owner_between_dates.nil?
                                     ''
                                   else
                                     f.object.bookings_by_owner_between_dates[:date_to].blank? ? '' : I18n.l(f.object.bookings_by_owner_between_dates[:date_to], format: '%d %B %Y')
                                   end, class: "form-control datepicker", placeholder: "Fecha de salida", readonly:"true", style:"background-color: white", id:"date_to" %>
    </div>
      <div class="form-group col-md">
        <%= f.submit :Buscar, class: "btn btn-info" %>
      </div>
    </div>
  <div class="table-wrapper-scroll-y my-custom-scrollbar">
  <table class="table table-striped table-hover w-100" id="booking_table">
    <thead class="thead-light">
    <tr>
      <th class="text-center">Cliente</th>
      <th class="text-center">Propiedad</th>
      <th class="text-center">HabitaciÃ³n</th>
      <th class="text-center">Fecha de entrada / salida</th>
      <th class="text-center">Estado</th>
    </tr>
    </thead>
    <tbody>
    <% bookings.each do |booking| %>

      <tr>
        <td class="text-center"><%= booking.client_name %></td>
        <td class="text-center"><%=booking.estate_name %></td>
        <% description = '' %>
        <% booking.booking_details.each_with_index do |details, i| %>
          <% description += details.room.description %>
          <% if i!=booking.booking_details.size-1 %>
            <% description += ", " %>
          <% end %>
        <% end %>
        <td class="text-center"><%= description %></td>
        <td class="text-center"><%= booking.date_start.strftime("%d-%m-%Y") %> / <%= booking.date_end.strftime("%d-%m-%Y") %></td>
        <%  status_booking = get_status(booking) %>
        <td class="text-center"><label class=" badge badge-pill badge-<%= get_status_color(status_booking) %>"><%= status_booking %></label></td>
      </tr>
    <% end %>
    </tbody>
  </table>
  </div>
  <div class="card card-columns-2 card-body bg-gray-light fixed-bottom">
    <div class="row row-flush">
      <div class="col">
        <%= will_paginate bookings, renderer: WillPaginate::ActionView::BootstrapLinkRenderer %>
      </div>
      <div class="col">
        <%= page_entries_info bookings, :model => 'booking', :class => 'align-middle' %>
      </div>
    </div>
  </div>
  <% end %>
</div>